"use client";
import Image from "next/image";
import "./styles.scss";
import ChartComponent from "../chart/Chart";
import { Nunito } from "next/font/google";
import { currentClientUser } from "@/helpers/current-client-user";
import { useProfileStore, useModalStore } from "@/store";
import { getUserDonations } from "@/actions/project";
import { getUserGoals } from "@/actions/user";
import { useQuery } from "@tanstack/react-query";
import { useGoalStore } from "@/store";
import { motion } from "framer-motion";
import { useSession } from "next-auth/react";

const nunito = Nunito({
  subsets: ["latin"],
  weight: ["200", "300", "400", "500", "600", "700", "800", "900", "1000"],
});

export default function NewProfile({ user, hasGoals }) {
  console.log(user);
  const { targetLives, period } = useGoalStore();
  const { data: session } = useSession();
  const { username, email, image } = useProfileStore();
  const currentUser = currentClientUser();
  const { data: userDonations } = useQuery({
    queryKey: ["userDonationStats"],
    queryFn: async () => {
      const result = await getUserDonations(currentUser.id);
      if (result.error) {
        throw new Error(result.error);
      }
      return result;
    },
    refetchOnMount: "always",
  });
  console.log(userDonations);
  const { data: userGoals } = useQuery({
    queryKey: ["userGoals"],
    queryFn: async () => {
      const result = await getUserGoals(currentUser.id);
      if (result.error) {
        throw new Error(result.error);
      }
      return result.success;
    },
    refetchOnMount: "always",
  });

  // console.log(`userDonationStats`, userDonationStats)
  // console.log(`userGoals`, userGoals)
  const setCredentials = useProfileStore((state) => state.setCredentials);
  // const username = useProfileStore((state) => state.username);
  const { toggleGoalModal, openGoalProgressModal, closeGoalProgressModal } =
    useModalStore();
  // Simple store of user info if we have user data and no username stored
  if (user && !username) {
    setCredentials(
      user.firstName || user.name.split(" ")[0],
      user.email,
      user.image
    );
  }
  return (
    <>
      <motion.div
        className={`newprofile ${nunito.className}`}
        initial={{ opacity: 0, y: 50 }}
        whileInView={{ opacity: 1, y: 0 }}
        viewport={{ once: true, amount: 0.1 }}
        transition={{
          duration: 1.0,
          ease: [0.25, 0.1, 0.25, 1],
        }}
      >
        <div className="profile">
          <div className="left">
            <Image
              src={session?.user?.image || image || "/avatar.png"}
              alt=""
              width={35}
              height={35}
              className="rounded-full bg-red-700"
            />
            <div>
              <h1 className="">
                {user?.firstName && user?.lastName
                  ? `${user.firstName} ${user.lastName}`
                  : user?.name}
              </h1>

              <h2 className="">
                {user.email.length > 15
                  ? `${user.email.slice(0, 15)}...`
                  : user.email}
              </h2>
            </div>
          </div>
          {hasGoals || targetLives ? (
            <div onClick={() => openGoalProgressModal()} className="right">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.1856 3.67369C15.3974 3.4623 15.4717 3.17263 15.3806 2.91711C15.2877 2.65911 15.0525 2.48651 14.7514 2.45555L13.5813 2.33704L13.4618 1.16409C13.4301 0.862312 13.2564 0.627791 12.9977 0.537047C12.7443 0.447367 12.4532 0.523525 12.2443 0.732778L10.4853 2.49078C10.4454 2.53099 10.4127 2.58081 10.3789 2.62922C9.42583 2.12388 8.34112 1.83455 7.18954 1.83455C3.42157 1.83455 0.356812 4.89967 0.356812 8.66728C0.356812 12.4349 3.42157 15.5 7.18954 15.5C10.9564 15.5 14.0219 12.4349 14.0219 8.66728C14.0219 7.54699 13.7458 6.49183 13.266 5.55768C13.324 5.51889 13.3813 5.47831 13.428 5.43134L15.1856 3.67369ZM12.9941 5.08116C12.9269 5.13312 12.8411 5.17405 12.7497 5.19932C12.6764 5.2196 12.602 5.23205 12.5365 5.22565L12.4372 5.21569L11.5102 5.12173L10.9653 5.66657L10.7717 5.86016L10.5753 6.05661L9.66569 6.96657L9.46961 7.1623L9.27032 7.36194L8.51017 8.12208L8.56 8.28045C8.71872 8.78543 8.58704 9.32956 8.21515 9.70072C7.94825 9.96799 7.59452 10.1153 7.21729 10.1153H7.21658C6.83936 10.1153 6.4842 9.96764 6.2173 9.69966C5.95111 9.43347 5.80448 9.07901 5.80448 8.70144C5.80448 8.32351 5.95111 7.96906 6.21801 7.70216C6.4778 7.44201 6.84007 7.29291 7.21303 7.29291C7.35822 7.29291 7.50128 7.31461 7.63865 7.35767L7.79665 7.4075L8.57067 6.63348L8.7664 6.43775L8.96036 6.24344L9.8703 5.33383L10.0664 5.13739L10.26 4.9438L10.797 4.40679L10.7006 3.45555L10.6931 3.38366C10.686 3.31106 10.6995 3.22814 10.724 3.14736C10.7514 3.05661 10.7949 2.97227 10.8493 2.90751C10.8575 2.89754 10.8639 2.88509 10.8724 2.87655L12.6312 1.11925C12.6909 1.05876 12.7564 1.03206 12.8162 1.05235C12.8952 1.08011 12.9137 1.17975 12.918 1.22032L13.0824 2.83597L14.6959 2.99932C14.7376 3.00359 14.8376 3.02209 14.866 3.10145C14.8856 3.15661 14.861 3.22601 14.7995 3.28722L13.0411 5.04522C13.0283 5.05803 13.0098 5.06906 12.9941 5.08116ZM7.18954 14.9534C3.72335 14.9534 0.903424 12.1335 0.903424 8.66728C0.903424 5.20109 3.72335 2.38117 7.18954 2.38117C8.26676 2.38117 9.28135 2.65413 10.1685 3.13384C10.1493 3.23704 10.1393 3.34024 10.149 3.43811L10.2269 4.20394L9.81195 4.61889C9.05608 4.12743 8.15643 3.83882 7.18954 3.83882C4.52691 3.83882 2.36108 6.00465 2.36108 8.66728C2.36108 11.3299 4.52691 13.4957 7.18954 13.4957C9.85146 13.4957 12.0176 11.3299 12.0176 8.66728C12.0176 7.73241 11.7461 6.86159 11.2842 6.12137L11.7137 5.69184L12.481 5.76942C12.57 5.77832 12.6628 5.77262 12.7564 5.75767C13.2134 6.62885 13.4753 7.61746 13.4753 8.66728C13.4753 12.1335 10.6554 14.9534 7.18954 14.9534ZM9.12548 8.28009L9.51978 7.88579C9.60234 8.13169 9.64897 8.39397 9.64897 8.66728C9.64897 10.0239 8.5454 11.1271 7.18954 11.1271C5.83295 11.1271 4.72975 10.0239 4.72975 8.66728C4.72975 7.3107 5.83295 6.2075 7.18954 6.2075C7.49665 6.2075 7.78953 6.26657 8.06107 6.37013L7.63865 6.79254C6.99737 6.6502 6.29274 6.85341 5.83153 7.31568C5.46143 7.68543 5.25787 8.1776 5.25787 8.70144C5.25787 9.22494 5.46143 9.71674 5.83011 10.0858C6.20021 10.4573 6.69274 10.6619 7.21729 10.6619C7.74042 10.6619 8.23223 10.4577 8.60128 10.0872C9.0778 9.61177 9.27102 8.93277 9.12548 8.28009ZM7.18954 5.66088C5.53189 5.66088 4.18314 7.00963 4.18314 8.66728C4.18314 10.3249 5.53189 11.6737 7.18954 11.6737C8.84682 11.6737 10.1956 10.3249 10.1956 8.66728C10.1956 8.23916 10.1041 7.8324 9.94219 7.46337L10.887 6.51853C11.2561 7.15127 11.471 7.88365 11.471 8.66728C11.471 11.0281 9.55003 12.9491 7.18954 12.9491C4.82797 12.9491 2.9077 11.0281 2.9077 8.66728C2.9077 6.30643 4.82797 4.38544 7.18954 4.38544C8.00519 4.38544 8.76498 4.61889 9.41479 5.01639L8.47636 5.95447C8.08563 5.76835 7.65038 5.66088 7.18954 5.66088Z"
                  fill="#EBCC48"
                />
              </svg>
              <h1 className="font-font_poppins">Goal in progress...</h1>
            </div>
          ) : (
            <div className="right" onClick={() => toggleGoalModal()}>
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.1856 3.67369C15.3974 3.4623 15.4717 3.17263 15.3806 2.91711C15.2877 2.65911 15.0525 2.48651 14.7514 2.45555L13.5813 2.33704L13.4618 1.16409C13.4301 0.862312 13.2564 0.627791 12.9977 0.537047C12.7443 0.447367 12.4532 0.523525 12.2443 0.732778L10.4853 2.49078C10.4454 2.53099 10.4127 2.58081 10.3789 2.62922C9.42583 2.12388 8.34112 1.83455 7.18954 1.83455C3.42157 1.83455 0.356812 4.89967 0.356812 8.66728C0.356812 12.4349 3.42157 15.5 7.18954 15.5C10.9564 15.5 14.0219 12.4349 14.0219 8.66728C14.0219 7.54699 13.7458 6.49183 13.266 5.55768C13.324 5.51889 13.3813 5.47831 13.428 5.43134L15.1856 3.67369ZM12.9941 5.08116C12.9269 5.13312 12.8411 5.17405 12.7497 5.19932C12.6764 5.2196 12.602 5.23205 12.5365 5.22565L12.4372 5.21569L11.5102 5.12173L10.9653 5.66657L10.7717 5.86016L10.5753 6.05661L9.66569 6.96657L9.46961 7.1623L9.27032 7.36194L8.51017 8.12208L8.56 8.28045C8.71872 8.78543 8.58704 9.32956 8.21515 9.70072C7.94825 9.96799 7.59452 10.1153 7.21729 10.1153H7.21658C6.83936 10.1153 6.4842 9.96764 6.2173 9.69966C5.95111 9.43347 5.80448 9.07901 5.80448 8.70144C5.80448 8.32351 5.95111 7.96906 6.21801 7.70216C6.4778 7.44201 6.84007 7.29291 7.21303 7.29291C7.35822 7.29291 7.50128 7.31461 7.63865 7.35767L7.79665 7.4075L8.57067 6.63348L8.7664 6.43775L8.96036 6.24344L9.8703 5.33383L10.0664 5.13739L10.26 4.9438L10.797 4.40679L10.7006 3.45555L10.6931 3.38366C10.686 3.31106 10.6995 3.22814 10.724 3.14736C10.7514 3.05661 10.7949 2.97227 10.8493 2.90751C10.8575 2.89754 10.8639 2.88509 10.8724 2.87655L12.6312 1.11925C12.6909 1.05876 12.7564 1.03206 12.8162 1.05235C12.8952 1.08011 12.9137 1.17975 12.918 1.22032L13.0824 2.83597L14.6959 2.99932C14.7376 3.00359 14.8376 3.02209 14.866 3.10145C14.8856 3.15661 14.861 3.22601 14.7995 3.28722L13.0411 5.04522C13.0283 5.05803 13.0098 5.06906 12.9941 5.08116ZM7.18954 14.9534C3.72335 14.9534 0.903424 12.1335 0.903424 8.66728C0.903424 5.20109 3.72335 2.38117 7.18954 2.38117C8.26676 2.38117 9.28135 2.65413 10.1685 3.13384C10.1493 3.23704 10.1393 3.34024 10.149 3.43811L10.2269 4.20394L9.81195 4.61889C9.05608 4.12743 8.15643 3.83882 7.18954 3.83882C4.52691 3.83882 2.36108 6.00465 2.36108 8.66728C2.36108 11.3299 4.52691 13.4957 7.18954 13.4957C9.85146 13.4957 12.0176 11.3299 12.0176 8.66728C12.0176 7.73241 11.7461 6.86159 11.2842 6.12137L11.7137 5.69184L12.481 5.76942C12.57 5.77832 12.6628 5.77262 12.7564 5.75767C13.2134 6.62885 13.4753 7.61746 13.4753 8.66728C13.4753 12.1335 10.6554 14.9534 7.18954 14.9534ZM9.12548 8.28009L9.51978 7.88579C9.60234 8.13169 9.64897 8.39397 9.64897 8.66728C9.64897 10.0239 8.5454 11.1271 7.18954 11.1271C5.83295 11.1271 4.72975 10.0239 4.72975 8.66728C4.72975 7.3107 5.83295 6.2075 7.18954 6.2075C7.49665 6.2075 7.78953 6.26657 8.06107 6.37013L7.63865 6.79254C6.99737 6.6502 6.29274 6.85341 5.83153 7.31568C5.46143 7.68543 5.25787 8.1776 5.25787 8.70144C5.25787 9.22494 5.46143 9.71674 5.83011 10.0858C6.20021 10.4573 6.69274 10.6619 7.21729 10.6619C7.74042 10.6619 8.23223 10.4577 8.60128 10.0872C9.0778 9.61177 9.27102 8.93277 9.12548 8.28009ZM7.18954 5.66088C5.53189 5.66088 4.18314 7.00963 4.18314 8.66728C4.18314 10.3249 5.53189 11.6737 7.18954 11.6737C8.84682 11.6737 10.1956 10.3249 10.1956 8.66728C10.1956 8.23916 10.1041 7.8324 9.94219 7.46337L10.887 6.51853C11.2561 7.15127 11.471 7.88365 11.471 8.66728C11.471 11.0281 9.55003 12.9491 7.18954 12.9491C4.82797 12.9491 2.9077 11.0281 2.9077 8.66728C2.9077 6.30643 4.82797 4.38544 7.18954 4.38544C8.00519 4.38544 8.76498 4.61889 9.41479 5.01639L8.47636 5.95447C8.08563 5.76835 7.65038 5.66088 7.18954 5.66088Z"
                  fill="#EBCC48"
                />
              </svg>
              <h1 className="font-font_poppins">Set Goal</h1>
            </div>
          )}
        </div>
        <div className="goal">
          <div className="left">
            <h1>My Goal</h1>
            <p>
              {Array.isArray(userGoals) && userGoals.length > 0
                ? userGoals[0].targetLives.toLocaleString("en-NG")
                : targetLives || 0}
            </p>
          </div>
          <div className="line"></div>
          <div className="right">
            <h1>Goal Achieved</h1>
            <p>
              {Array.isArray(userGoals) && userGoals.length > 0
                ? userGoals[0].achievedLives.toLocaleString("en-NG")
                : 0}
            </p>
          </div>
        </div>
        <div className="chart">
          <ChartComponent
            goals={userGoals}
            impact={Number(userDonations?.totalStats.impact)}
          />
        </div>
        <div className="stats">
          <div className="stat">
            <div className="left">
              <svg
                width="10"
                height="10"
                viewBox="0 0 10 10"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_3158_2664)">
                  <path
                    d="M4.58275 4.90852C4.69938 5.03139 4.89097 5.03139 5.00759 4.90852L6.80859 3.0059C7.33339 2.4541 7.30373 1.53811 6.71445 1.0283C6.19998 0.582636 5.43577 0.663439 4.96677 1.15699L4.78101 1.35002L4.60941 1.15625C4.14125 0.66269 3.37487 0.581903 2.8484 1.02764C2.27528 1.53778 2.24196 2.45444 2.7701 3.0059L4.58275 4.90852ZM9.46426 6.33798C9.24567 6.04126 8.82883 5.97712 8.53244 6.19689L6.53819 7.66584H4.52894C4.38319 7.66584 4.27737 7.54505 4.27737 7.41426C4.27737 7.26855 4.39815 7.16269 4.52894 7.16269H5.83262C6.08419 7.16269 6.34493 6.98159 6.38858 6.71919C6.44272 6.40098 6.18665 6.09659 5.86177 6.09659H3.18161C2.74677 6.09659 2.29661 6.2507 1.94674 6.53393L1.17203 7.16269L0.24954 7.16227C0.103795 7.16227 -0.00203233 7.28347 -0.00203233 7.42917L-0.00219727 8.99865C-0.00219727 9.14527 0.118606 9.26522 0.249374 9.26522H6.01555C6.38258 9.26522 6.74727 9.14548 7.0435 8.92735L9.29432 7.26947C9.6192 7.05105 9.68251 6.63454 9.46426 6.33798Z"
                    fill="#1986D5"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_3158_2664">
                    <rect
                      width="9.59641"
                      height="8.53014"
                      fill="white"
                      transform="translate(0 0.735352)"
                    />
                  </clipPath>
                </defs>
              </svg>
              <h1 className="">My Givings</h1>
            </div>
            <div className="right">
              <h1 className="">
                ₦
                {Number(userDonations?.totalStats.amount).toLocaleString(
                  "en-NG",
                  {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2,
                  }
                )}
              </h1>
            </div>
          </div>
          <div className="stat">
            <div className="left">
              <svg
                width="11"
                height="12"
                viewBox="0 0 11 12"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.38597 7.29962C6.80463 7.29962 7.14402 7.63901 7.14402 8.05767L7.14354 8.47442C7.19409 9.42268 6.48902 9.90254 5.22369 9.90254C3.96362 9.90254 3.24548 9.43047 3.24548 8.49084V8.05767C3.24548 7.63901 3.58487 7.29962 4.00353 7.29962H6.38597ZM1.62109 5.13376L3.51664 5.1338C3.48102 5.27225 3.46206 5.41736 3.46206 5.56693C3.46206 6.05013 3.65987 6.48716 3.97892 6.80143L4.04912 6.86688L4.00353 6.86645C3.87299 6.86645 3.74736 6.88745 3.62983 6.92622C3.25525 7.04989 2.9629 7.35437 2.85615 7.73634L2.84124 7.73669C1.58117 7.73669 0.863037 7.26462 0.863037 6.32498V5.89181C0.863037 5.47315 1.20253 5.13376 1.62109 5.13376ZM8.76841 5.13376C9.18707 5.13376 9.52646 5.47315 9.52646 5.89181L9.52598 6.30856C9.57654 7.25682 8.87146 7.73669 7.60613 7.73669L7.53322 7.73595C7.42974 7.36607 7.15216 7.06887 6.79441 6.93831C6.69248 6.9011 6.58406 6.87745 6.4713 6.86943L6.38597 6.86645L6.34036 6.86688C6.70037 6.54936 6.92743 6.08466 6.92743 5.56693C6.92743 5.41736 6.9085 5.27225 6.87285 5.1338L8.76841 5.13376ZM5.19475 4.26742C5.91247 4.26742 6.49426 4.84923 6.49426 5.56693C6.49426 6.28465 5.91247 6.86645 5.19475 6.86645C4.47703 6.86645 3.89524 6.28465 3.89524 5.56693C3.89524 4.84923 4.47703 4.26742 5.19475 4.26742ZM2.81231 2.10156C3.53001 2.10156 4.11182 2.68338 4.11182 3.40108C4.11182 4.11878 3.53001 4.70059 2.81231 4.70059C2.09461 4.70059 1.51279 4.11878 1.51279 3.40108C1.51279 2.68338 2.09461 2.10156 2.81231 2.10156ZM7.57719 2.10156C8.29491 2.10156 8.87671 2.68338 8.87671 3.40108C8.87671 4.11878 8.29491 4.70059 7.57719 4.70059C6.85947 4.70059 6.27768 4.11878 6.27768 3.40108C6.27768 2.68338 6.85947 2.10156 7.57719 2.10156Z"
                  fill="#00A400"
                />
              </svg>

              <h1 className="">Lives Impacted</h1>
            </div>
            <div className="right">
              <h1 className="">
                {Number(userDonations?.totalStats.fimpact).toLocaleString(
                  "en-NG",
                  {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2,
                  }
                ) || 0}
              </h1>
            </div>
          </div>
          <div className="stat">
            <div className="left">
              <svg
                width="8"
                height="8"
                viewBox="0 0 8 8"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M0 0.401367H0.449832V7.14884H7.19731V7.59867H0V0.401367ZM6.66516 1.80169C6.68803 1.82041 6.70699 1.84345 6.72095 1.8695C6.73492 1.89555 6.74361 1.9241 6.74653 1.95351C6.74946 1.98292 6.74656 2.01262 6.738 2.04091C6.72944 2.0692 6.71538 2.09552 6.69664 2.11837L4.6724 4.59245C4.65251 4.61673 4.62775 4.63658 4.59972 4.65072C4.57169 4.66486 4.54101 4.67298 4.50965 4.67454C4.4783 4.67611 4.44696 4.6711 4.41766 4.65983C4.38836 4.64855 4.36175 4.63127 4.33953 4.60909L3.17581 3.44538L1.53123 5.70668C1.49525 5.75243 1.44294 5.78245 1.38529 5.79043C1.32765 5.79842 1.26915 5.78375 1.22209 5.74951C1.17503 5.71526 1.14308 5.66411 1.13295 5.6068C1.12282 5.54949 1.1353 5.49048 1.16776 5.44218L2.96709 2.96811C2.98619 2.9418 3.01076 2.91994 3.03912 2.90405C3.06748 2.88815 3.09895 2.87859 3.13136 2.87602C3.16376 2.87346 3.19634 2.87795 3.22685 2.88919C3.25736 2.90042 3.28506 2.91814 3.30806 2.94112L4.48167 4.11518L6.34847 1.83318C6.36719 1.81031 6.39023 1.79135 6.41628 1.77738C6.44233 1.76342 6.47088 1.75473 6.50029 1.7518C6.5297 1.74888 6.5594 1.75178 6.58769 1.76034C6.61598 1.7689 6.6423 1.78295 6.66516 1.80169Z"
                  fill="#DC3912"
                />
              </svg>

              <h1 className="">Project Impact</h1>
            </div>
            <div className="right">
              <h1 className="">
                {Number(
                  userDonations?.totalStats.totalAchievedGoal
                ).toLocaleString("en-NG", {
                  minimumFractionDigits: 2,
                  maximumFractionDigits: 2,
                })}
              </h1>
            </div>
          </div>
        </div>
      </motion.div>
      <motion.div
        initial={{ opacity: 0, y: 50 }}
        whileInView={{ opacity: 1, y: 0 }}
        viewport={{ once: true, amount: 0.1 }}
        transition={{
          duration: 1.0,
          ease: [0.25, 0.1, 0.25, 1],
        }}
        className={`newprofileL ${nunito.className}`}
      >
        <div className="profile">
          <div className="left">
            <img
              src={session?.user?.image || image || "/avatar.png"}
              alt=""
              width={45}
              height={45}
              className="rounded-full bg-red-700"
            />
            <div>
              <h1 className="">
                {user?.firstName && user?.lastName
                  ? `${user.firstName} ${user.lastName}`
                  : user?.name}
              </h1>

              <p className="">{user.email}</p>
            </div>
          </div>
          {hasGoals || targetLives ? (
            <div onClick={() => openGoalProgressModal()} className="right">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.1856 3.67369C15.3974 3.4623 15.4717 3.17263 15.3806 2.91711C15.2877 2.65911 15.0525 2.48651 14.7514 2.45555L13.5813 2.33704L13.4618 1.16409C13.4301 0.862312 13.2564 0.627791 12.9977 0.537047C12.7443 0.447367 12.4532 0.523525 12.2443 0.732778L10.4853 2.49078C10.4454 2.53099 10.4127 2.58081 10.3789 2.62922C9.42583 2.12388 8.34112 1.83455 7.18954 1.83455C3.42157 1.83455 0.356812 4.89967 0.356812 8.66728C0.356812 12.4349 3.42157 15.5 7.18954 15.5C10.9564 15.5 14.0219 12.4349 14.0219 8.66728C14.0219 7.54699 13.7458 6.49183 13.266 5.55768C13.324 5.51889 13.3813 5.47831 13.428 5.43134L15.1856 3.67369ZM12.9941 5.08116C12.9269 5.13312 12.8411 5.17405 12.7497 5.19932C12.6764 5.2196 12.602 5.23205 12.5365 5.22565L12.4372 5.21569L11.5102 5.12173L10.9653 5.66657L10.7717 5.86016L10.5753 6.05661L9.66569 6.96657L9.46961 7.1623L9.27032 7.36194L8.51017 8.12208L8.56 8.28045C8.71872 8.78543 8.58704 9.32956 8.21515 9.70072C7.94825 9.96799 7.59452 10.1153 7.21729 10.1153H7.21658C6.83936 10.1153 6.4842 9.96764 6.2173 9.69966C5.95111 9.43347 5.80448 9.07901 5.80448 8.70144C5.80448 8.32351 5.95111 7.96906 6.21801 7.70216C6.4778 7.44201 6.84007 7.29291 7.21303 7.29291C7.35822 7.29291 7.50128 7.31461 7.63865 7.35767L7.79665 7.4075L8.57067 6.63348L8.7664 6.43775L8.96036 6.24344L9.8703 5.33383L10.0664 5.13739L10.26 4.9438L10.797 4.40679L10.7006 3.45555L10.6931 3.38366C10.686 3.31106 10.6995 3.22814 10.724 3.14736C10.7514 3.05661 10.7949 2.97227 10.8493 2.90751C10.8575 2.89754 10.8639 2.88509 10.8724 2.87655L12.6312 1.11925C12.6909 1.05876 12.7564 1.03206 12.8162 1.05235C12.8952 1.08011 12.9137 1.17975 12.918 1.22032L13.0824 2.83597L14.6959 2.99932C14.7376 3.00359 14.8376 3.02209 14.866 3.10145C14.8856 3.15661 14.861 3.22601 14.7995 3.28722L13.0411 5.04522C13.0283 5.05803 13.0098 5.06906 12.9941 5.08116ZM7.18954 14.9534C3.72335 14.9534 0.903424 12.1335 0.903424 8.66728C0.903424 5.20109 3.72335 2.38117 7.18954 2.38117C8.26676 2.38117 9.28135 2.65413 10.1685 3.13384C10.1493 3.23704 10.1393 3.34024 10.149 3.43811L10.2269 4.20394L9.81195 4.61889C9.05608 4.12743 8.15643 3.83882 7.18954 3.83882C4.52691 3.83882 2.36108 6.00465 2.36108 8.66728C2.36108 11.3299 4.52691 13.4957 7.18954 13.4957C9.85146 13.4957 12.0176 11.3299 12.0176 8.66728C12.0176 7.73241 11.7461 6.86159 11.2842 6.12137L11.7137 5.69184L12.481 5.76942C12.57 5.77832 12.6628 5.77262 12.7564 5.75767C13.2134 6.62885 13.4753 7.61746 13.4753 8.66728C13.4753 12.1335 10.6554 14.9534 7.18954 14.9534ZM9.12548 8.28009L9.51978 7.88579C9.60234 8.13169 9.64897 8.39397 9.64897 8.66728C9.64897 10.0239 8.5454 11.1271 7.18954 11.1271C5.83295 11.1271 4.72975 10.0239 4.72975 8.66728C4.72975 7.3107 5.83295 6.2075 7.18954 6.2075C7.49665 6.2075 7.78953 6.26657 8.06107 6.37013L7.63865 6.79254C6.99737 6.6502 6.29274 6.85341 5.83153 7.31568C5.46143 7.68543 5.25787 8.1776 5.25787 8.70144C5.25787 9.22494 5.46143 9.71674 5.83011 10.0858C6.20021 10.4573 6.69274 10.6619 7.21729 10.6619C7.74042 10.6619 8.23223 10.4577 8.60128 10.0872C9.0778 9.61177 9.27102 8.93277 9.12548 8.28009ZM7.18954 5.66088C5.53189 5.66088 4.18314 7.00963 4.18314 8.66728C4.18314 10.3249 5.53189 11.6737 7.18954 11.6737C8.84682 11.6737 10.1956 10.3249 10.1956 8.66728C10.1956 8.23916 10.1041 7.8324 9.94219 7.46337L10.887 6.51853C11.2561 7.15127 11.471 7.88365 11.471 8.66728C11.471 11.0281 9.55003 12.9491 7.18954 12.9491C4.82797 12.9491 2.9077 11.0281 2.9077 8.66728C2.9077 6.30643 4.82797 4.38544 7.18954 4.38544C8.00519 4.38544 8.76498 4.61889 9.41479 5.01639L8.47636 5.95447C8.08563 5.76835 7.65038 5.66088 7.18954 5.66088Z"
                  fill="#EBCC48"
                />
              </svg>
              <h1 className="font-font_poppins">Goal in progress...</h1>
            </div>
          ) : (
            <div className="right" onClick={() => toggleGoalModal()}>
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15.1856 3.67369C15.3974 3.4623 15.4717 3.17263 15.3806 2.91711C15.2877 2.65911 15.0525 2.48651 14.7514 2.45555L13.5813 2.33704L13.4618 1.16409C13.4301 0.862312 13.2564 0.627791 12.9977 0.537047C12.7443 0.447367 12.4532 0.523525 12.2443 0.732778L10.4853 2.49078C10.4454 2.53099 10.4127 2.58081 10.3789 2.62922C9.42583 2.12388 8.34112 1.83455 7.18954 1.83455C3.42157 1.83455 0.356812 4.89967 0.356812 8.66728C0.356812 12.4349 3.42157 15.5 7.18954 15.5C10.9564 15.5 14.0219 12.4349 14.0219 8.66728C14.0219 7.54699 13.7458 6.49183 13.266 5.55768C13.324 5.51889 13.3813 5.47831 13.428 5.43134L15.1856 3.67369ZM12.9941 5.08116C12.9269 5.13312 12.8411 5.17405 12.7497 5.19932C12.6764 5.2196 12.602 5.23205 12.5365 5.22565L12.4372 5.21569L11.5102 5.12173L10.9653 5.66657L10.7717 5.86016L10.5753 6.05661L9.66569 6.96657L9.46961 7.1623L9.27032 7.36194L8.51017 8.12208L8.56 8.28045C8.71872 8.78543 8.58704 9.32956 8.21515 9.70072C7.94825 9.96799 7.59452 10.1153 7.21729 10.1153H7.21658C6.83936 10.1153 6.4842 9.96764 6.2173 9.69966C5.95111 9.43347 5.80448 9.07901 5.80448 8.70144C5.80448 8.32351 5.95111 7.96906 6.21801 7.70216C6.4778 7.44201 6.84007 7.29291 7.21303 7.29291C7.35822 7.29291 7.50128 7.31461 7.63865 7.35767L7.79665 7.4075L8.57067 6.63348L8.7664 6.43775L8.96036 6.24344L9.8703 5.33383L10.0664 5.13739L10.26 4.9438L10.797 4.40679L10.7006 3.45555L10.6931 3.38366C10.686 3.31106 10.6995 3.22814 10.724 3.14736C10.7514 3.05661 10.7949 2.97227 10.8493 2.90751C10.8575 2.89754 10.8639 2.88509 10.8724 2.87655L12.6312 1.11925C12.6909 1.05876 12.7564 1.03206 12.8162 1.05235C12.8952 1.08011 12.9137 1.17975 12.918 1.22032L13.0824 2.83597L14.6959 2.99932C14.7376 3.00359 14.8376 3.02209 14.866 3.10145C14.8856 3.15661 14.861 3.22601 14.7995 3.28722L13.0411 5.04522C13.0283 5.05803 13.0098 5.06906 12.9941 5.08116ZM7.18954 14.9534C3.72335 14.9534 0.903424 12.1335 0.903424 8.66728C0.903424 5.20109 3.72335 2.38117 7.18954 2.38117C8.26676 2.38117 9.28135 2.65413 10.1685 3.13384C10.1493 3.23704 10.1393 3.34024 10.149 3.43811L10.2269 4.20394L9.81195 4.61889C9.05608 4.12743 8.15643 3.83882 7.18954 3.83882C4.52691 3.83882 2.36108 6.00465 2.36108 8.66728C2.36108 11.3299 4.52691 13.4957 7.18954 13.4957C9.85146 13.4957 12.0176 11.3299 12.0176 8.66728C12.0176 7.73241 11.7461 6.86159 11.2842 6.12137L11.7137 5.69184L12.481 5.76942C12.57 5.77832 12.6628 5.77262 12.7564 5.75767C13.2134 6.62885 13.4753 7.61746 13.4753 8.66728C13.4753 12.1335 10.6554 14.9534 7.18954 14.9534ZM9.12548 8.28009L9.51978 7.88579C9.60234 8.13169 9.64897 8.39397 9.64897 8.66728C9.64897 10.0239 8.5454 11.1271 7.18954 11.1271C5.83295 11.1271 4.72975 10.0239 4.72975 8.66728C4.72975 7.3107 5.83295 6.2075 7.18954 6.2075C7.49665 6.2075 7.78953 6.26657 8.06107 6.37013L7.63865 6.79254C6.99737 6.6502 6.29274 6.85341 5.83153 7.31568C5.46143 7.68543 5.25787 8.1776 5.25787 8.70144C5.25787 9.22494 5.46143 9.71674 5.83011 10.0858C6.20021 10.4573 6.69274 10.6619 7.21729 10.6619C7.74042 10.6619 8.23223 10.4577 8.60128 10.0872C9.0778 9.61177 9.27102 8.93277 9.12548 8.28009ZM7.18954 5.66088C5.53189 5.66088 4.18314 7.00963 4.18314 8.66728C4.18314 10.3249 5.53189 11.6737 7.18954 11.6737C8.84682 11.6737 10.1956 10.3249 10.1956 8.66728C10.1956 8.23916 10.1041 7.8324 9.94219 7.46337L10.887 6.51853C11.2561 7.15127 11.471 7.88365 11.471 8.66728C11.471 11.0281 9.55003 12.9491 7.18954 12.9491C4.82797 12.9491 2.9077 11.0281 2.9077 8.66728C2.9077 6.30643 4.82797 4.38544 7.18954 4.38544C8.00519 4.38544 8.76498 4.61889 9.41479 5.01639L8.47636 5.95447C8.08563 5.76835 7.65038 5.66088 7.18954 5.66088Z"
                  fill="#EBCC48"
                />
              </svg>
              <h1 className="font-font_poppins">Set Goal</h1>
            </div>
          )}
        </div>

        <div className="largeLeft">
          <div className="chart">
            <ChartComponent goals={userGoals} />
          </div>
          <div className="leftL">
            <div className="goal">
              <div className="left">
                <h1>My Goal</h1>
                <p>
                  {Array.isArray(userGoals) && userGoals.length > 0
                    ? userGoals[0].targetLives
                    : targetLives || 0}
                </p>
              </div>
              <div className="line"></div>
              <div className="right">
                <h1>Goal Achieved</h1>
                <p>
                  {Array.isArray(userGoals) && userGoals.length > 0
                    ? userGoals[0].achievedLives
                    : 0}
                </p>
              </div>
            </div>
            <div className="stats">
              <div className="stat">
                <div className="left">
                  <svg
                    width="10"
                    height="10"
                    viewBox="0 0 10 10"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clip-path="url(#clip0_3158_2664)">
                      <path
                        d="M4.58275 4.90852C4.69938 5.03139 4.89097 5.03139 5.00759 4.90852L6.80859 3.0059C7.33339 2.4541 7.30373 1.53811 6.71445 1.0283C6.19998 0.582636 5.43577 0.663439 4.96677 1.15699L4.78101 1.35002L4.60941 1.15625C4.14125 0.66269 3.37487 0.581903 2.8484 1.02764C2.27528 1.53778 2.24196 2.45444 2.7701 3.0059L4.58275 4.90852ZM9.46426 6.33798C9.24567 6.04126 8.82883 5.97712 8.53244 6.19689L6.53819 7.66584H4.52894C4.38319 7.66584 4.27737 7.54505 4.27737 7.41426C4.27737 7.26855 4.39815 7.16269 4.52894 7.16269H5.83262C6.08419 7.16269 6.34493 6.98159 6.38858 6.71919C6.44272 6.40098 6.18665 6.09659 5.86177 6.09659H3.18161C2.74677 6.09659 2.29661 6.2507 1.94674 6.53393L1.17203 7.16269L0.24954 7.16227C0.103795 7.16227 -0.00203233 7.28347 -0.00203233 7.42917L-0.00219727 8.99865C-0.00219727 9.14527 0.118606 9.26522 0.249374 9.26522H6.01555C6.38258 9.26522 6.74727 9.14548 7.0435 8.92735L9.29432 7.26947C9.6192 7.05105 9.68251 6.63454 9.46426 6.33798Z"
                        fill="#1986D5"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_3158_2664">
                        <rect
                          width="9.59641"
                          height="8.53014"
                          fill="white"
                          transform="translate(0 0.735352)"
                        />
                      </clipPath>
                    </defs>
                  </svg>
                  <h1 className="">My Givings</h1>
                </div>
                <div className="right">
                  <h1 className="">
                    ₦
                    {Number(userDonations?.totalStats.amount).toLocaleString(
                      "en-NG",
                      {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2,
                      }
                    )}
                  </h1>
                </div>
              </div>
              <div className="stat">
                <div className="left">
                  <svg
                    width="11"
                    height="12"
                    viewBox="0 0 11 12"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M6.38597 7.29962C6.80463 7.29962 7.14402 7.63901 7.14402 8.05767L7.14354 8.47442C7.19409 9.42268 6.48902 9.90254 5.22369 9.90254C3.96362 9.90254 3.24548 9.43047 3.24548 8.49084V8.05767C3.24548 7.63901 3.58487 7.29962 4.00353 7.29962H6.38597ZM1.62109 5.13376L3.51664 5.1338C3.48102 5.27225 3.46206 5.41736 3.46206 5.56693C3.46206 6.05013 3.65987 6.48716 3.97892 6.80143L4.04912 6.86688L4.00353 6.86645C3.87299 6.86645 3.74736 6.88745 3.62983 6.92622C3.25525 7.04989 2.9629 7.35437 2.85615 7.73634L2.84124 7.73669C1.58117 7.73669 0.863037 7.26462 0.863037 6.32498V5.89181C0.863037 5.47315 1.20253 5.13376 1.62109 5.13376ZM8.76841 5.13376C9.18707 5.13376 9.52646 5.47315 9.52646 5.89181L9.52598 6.30856C9.57654 7.25682 8.87146 7.73669 7.60613 7.73669L7.53322 7.73595C7.42974 7.36607 7.15216 7.06887 6.79441 6.93831C6.69248 6.9011 6.58406 6.87745 6.4713 6.86943L6.38597 6.86645L6.34036 6.86688C6.70037 6.54936 6.92743 6.08466 6.92743 5.56693C6.92743 5.41736 6.9085 5.27225 6.87285 5.1338L8.76841 5.13376ZM5.19475 4.26742C5.91247 4.26742 6.49426 4.84923 6.49426 5.56693C6.49426 6.28465 5.91247 6.86645 5.19475 6.86645C4.47703 6.86645 3.89524 6.28465 3.89524 5.56693C3.89524 4.84923 4.47703 4.26742 5.19475 4.26742ZM2.81231 2.10156C3.53001 2.10156 4.11182 2.68338 4.11182 3.40108C4.11182 4.11878 3.53001 4.70059 2.81231 4.70059C2.09461 4.70059 1.51279 4.11878 1.51279 3.40108C1.51279 2.68338 2.09461 2.10156 2.81231 2.10156ZM7.57719 2.10156C8.29491 2.10156 8.87671 2.68338 8.87671 3.40108C8.87671 4.11878 8.29491 4.70059 7.57719 4.70059C6.85947 4.70059 6.27768 4.11878 6.27768 3.40108C6.27768 2.68338 6.85947 2.10156 7.57719 2.10156Z"
                      fill="#00A400"
                    />
                  </svg>

                  <h1 className="">Lives Impacted</h1>
                </div>
                <div className="right">
                  <h1 className="">
                    {Number(userDonations?.totalStats.fimpact).toLocaleString(
                      "en-NG",
                      {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2,
                      }
                    )}
                  </h1>
                </div>
              </div>
              <div className="stat">
                <div className="left">
                  <svg
                    width="8"
                    height="8"
                    viewBox="0 0 8 8"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 0.401367H0.449832V7.14884H7.19731V7.59867H0V0.401367ZM6.66516 1.80169C6.68803 1.82041 6.70699 1.84345 6.72095 1.8695C6.73492 1.89555 6.74361 1.9241 6.74653 1.95351C6.74946 1.98292 6.74656 2.01262 6.738 2.04091C6.72944 2.0692 6.71538 2.09552 6.69664 2.11837L4.6724 4.59245C4.65251 4.61673 4.62775 4.63658 4.59972 4.65072C4.57169 4.66486 4.54101 4.67298 4.50965 4.67454C4.4783 4.67611 4.44696 4.6711 4.41766 4.65983C4.38836 4.64855 4.36175 4.63127 4.33953 4.60909L3.17581 3.44538L1.53123 5.70668C1.49525 5.75243 1.44294 5.78245 1.38529 5.79043C1.32765 5.79842 1.26915 5.78375 1.22209 5.74951C1.17503 5.71526 1.14308 5.66411 1.13295 5.6068C1.12282 5.54949 1.1353 5.49048 1.16776 5.44218L2.96709 2.96811C2.98619 2.9418 3.01076 2.91994 3.03912 2.90405C3.06748 2.88815 3.09895 2.87859 3.13136 2.87602C3.16376 2.87346 3.19634 2.87795 3.22685 2.88919C3.25736 2.90042 3.28506 2.91814 3.30806 2.94112L4.48167 4.11518L6.34847 1.83318C6.36719 1.81031 6.39023 1.79135 6.41628 1.77738C6.44233 1.76342 6.47088 1.75473 6.50029 1.7518C6.5297 1.74888 6.5594 1.75178 6.58769 1.76034C6.61598 1.7689 6.6423 1.78295 6.66516 1.80169Z"
                      fill="#DC3912"
                    />
                  </svg>

                  <h1 className="">Project Impact</h1>
                </div>
                <div className="right">
                  <h1 className="">
                    {Number(
                      userDonations?.totalStats.totalAchievedGoal
                    ).toLocaleString("en-NG", {
                      minimumFractionDigits: 2,
                      maximumFractionDigits: 2,
                    })}
                  </h1>
                </div>
              </div>
            </div>
          </div>
        </div>
      </motion.div>
    </>
  );
}
